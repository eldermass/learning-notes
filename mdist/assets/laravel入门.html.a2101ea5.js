import{_ as e,r as o,o as c,c as i,a as n,e as t,b as s,d as p}from"./app.ddafede6.js";const l={},u=n("h1",{id:"laravel",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#laravel","aria-hidden":"true"},"#"),s(" laravel")],-1),r={href:"https://laravelacademy.org/laravel-tutorial-5_7",target:"_blank",rel:"noopener noreferrer"},k=s("\u5165\u95E8"),d={href:"https://laravelacademy.org/post/9536.html#toc_6",target:"_blank",rel:"noopener noreferrer"},v=s("\u95E8\u9762\u5217\u8868"),g=p(`<h2 id="\u4E00-\u5165\u95E8\u77E5\u8BC6" tabindex="-1"><a class="header-anchor" href="#\u4E00-\u5165\u95E8\u77E5\u8BC6" aria-hidden="true">#</a> \u4E00. \u5165\u95E8\u77E5\u8BC6</h2><h3 id="_1-\u57FA\u7840\u5165\u95E8" tabindex="-1"><a class="header-anchor" href="#_1-\u57FA\u7840\u5165\u95E8" aria-hidden="true">#</a> 1. \u57FA\u7840\u5165\u95E8</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 1. \u901A\u8FC7\u5B89\u88C5\u5668 \u6216 composer\u5B89\u88C5</span>
<span class="token function">composer</span> global require laravel/installer
laravel new blog

<span class="token comment"># \u901A\u8FC7composer\u5B89\u88C5\uFF1A</span>
<span class="token function">composer</span> create-project laravel/laravel blog --prefer-dist

<span class="token comment"># 2. \u8BFB\u53D6\u914D\u7F6E</span>
<span class="token comment"># config \u76EE\u5F55\u4E0B\uFF0C\u901A\u8FC7env()\u51FD\u6570\u8BFB\u53D6\u5230.env\u6587\u4EF6\u7684\u53D8\u91CF\u3002\u4E5F\u53EF\u4F7F\u7528\u65F6config()\u51FD\u6570\u8BFB\u53D6\u503C</span>
\u5982\uFF1Aconfig<span class="token punctuation">(</span><span class="token string">&quot;services.sparkpost.secret&quot;</span><span class="token punctuation">)</span>
    env<span class="token punctuation">(</span><span class="token string">&quot;SPARKPOST_SECRET&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 3. \u57FA\u672C\u5E38\u8BC6</span>
<span class="token comment"># \u5BF9\u5E94\u57DF\u5BF9\u5E94\u7684\u8FDE\u63A5</span>
  url<span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>
<span class="token comment"># \u547D\u540D\u8DEF\u7531\u7684\u8FDE\u63A5</span>
  route<span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span>, <span class="token punctuation">[</span><span class="token string">&quot;id&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># \u6E32\u67D3\u51FD\u6570\uFF0Cresource/views\u4E0B\u5BF9\u5E94\u7684blade\u9875\u9762</span>
  view<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># \u6A21\u677F\uFF1A</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span> xxx <span class="token punctuation">}</span><span class="token punctuation">}</span>   \u8F6C\u79FB
    <span class="token punctuation">{</span><span class="token operator">!</span><span class="token operator">!</span> xxx <span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">}</span> \u4E0D\u8F6C\u4E49
<span class="token comment"># \u6253\u5370sql\u8BED\u53E5</span>
<span class="token punctuation">\\</span>DB::enableQueryLog<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$users</span> <span class="token operator">=</span> Task::with<span class="token punctuation">(</span><span class="token string">&#39;belongTo&#39;</span><span class="token punctuation">)</span>-<span class="token operator">&gt;</span>find<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dump<span class="token punctuation">(</span><span class="token punctuation">\\</span>DB::getQueryLog<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>

<span class="token comment"># \u4EA4\u4E92\u547D\u4EE4</span>
<span class="token comment"># \u521B\u5EFA\u63A7\u5236\u5668</span>
php artisan make:COntroller User/Admin
<span class="token comment"># \u521B\u5EFA\u8FC1\u79FB\u7C7B</span>
php artisan make:migration create_users_table
<span class="token comment"># \u6267\u884C\u8FC1\u79FB</span>
php artisan migrate
<span class="token comment"># \u56DE\u6EDA\u8FC1\u79FB</span>
php artisan migrate:rollback
<span class="token comment"># \u91CD\u7F6E\u8FC1\u79FB</span>
php artisan migrate:reset
<span class="token comment"># \u521B\u5EFA\u586B\u5145\u7C7B</span>
php artisan make:seeder UsersTableSeeder
<span class="token comment"># \u6267\u884C\u586B\u5145</span>
php artisan db:seed --class<span class="token operator">=</span>UsersTableSeeder
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-\u4EA4\u4E92\u5165\u53E3-artisan" tabindex="-1"><a class="header-anchor" href="#_2-\u4EA4\u4E92\u5165\u53E3-artisan" aria-hidden="true">#</a> 2. \u4EA4\u4E92\u5165\u53E3 artisan</h3>`,4),m={href:"https://laravelacademy.org/post/9684.html",target:"_blank",rel:"noopener noreferrer"},b=s("\u53C2\u8003"),h=p(`<div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// app/Console/Kernel.php  \u4E2D\u6CE8\u518C</span>
<span class="token comment">// \u81EA\u5B9A\u4E49\u547D\u4EE4</span>
<span class="token class-name static-context">Artisan</span><span class="token operator">::</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;welcome:message_simple&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;\u6B22\u8FCE\u8BBF\u95EE Laravel \u5B66\u9662!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;\u6253\u5370\u6B22\u8FCE\u4FE1\u606F&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-tinker-\u547D\u4EE4\u5F0F\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#_3-tinker-\u547D\u4EE4\u5F0F\u64CD\u4F5C" aria-hidden="true">#</a> 3. tinker \u547D\u4EE4\u5F0F\u64CD\u4F5C</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// php artisan tinker \u5373\u53EF\u8FDB\u5165 Laravel Tinker \u7684\u4EA4\u4E92\u5F0F Shell\u3002</span>

<span class="token comment">// doc \u547D\u4EE4\u7528\u4E8E\u627E\u67E5\u6587\u6863\u548C\u8F85\u52A9\u51FD\u6570</span>
doc config      show config


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4E8C-\u811A\u672C\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#\u4E8C-\u811A\u672C\u64CD\u4F5C" aria-hidden="true">#</a> \u4E8C. \u811A\u672C\u64CD\u4F5C</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u901A\u8FC7Artisan\u547D\u4EE4,\u6267\u884C\u76F8\u5E94\u7684\u64CD\u4F5C</span>
<span class="token comment"># \u811A\u672C\u5316\u521B\u5EFA\u63A7\u5236\u5668</span>
php artisan make:controller TaskController
php artisan make:controller PostController --resource
<span class="token comment"># \u67E5\u770B\u5E94\u7528\u7684\u6240\u6709\u8DEF\u7531</span>
php artisan route:list

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4E09-\u5B9A\u4E49\u8DEF\u7531" tabindex="-1"><a class="header-anchor" href="#\u4E09-\u5B9A\u4E49\u8DEF\u7531" aria-hidden="true">#</a> \u4E09. \u5B9A\u4E49\u8DEF\u7531</h2>`,6),f=s("routes \u76EE\u5F55\u4E0B Route \u7C7B\u8BBE\u7F6E\u51FD\u6570 "),q={href:"https://laravelacademy.org/post/9612.html",target:"_blank",rel:"noopener noreferrer"},w=s("\u8DEF\u7531\u6559\u7A0B"),y=p(`<h3 id="_1-\u95ED\u5305\u8DEF\u7531" tabindex="-1"><a class="header-anchor" href="#_1-\u95ED\u5305\u8DEF\u7531" aria-hidden="true">#</a> 1. \u95ED\u5305\u8DEF\u7531</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// \u5355\u4E2A\u52A8\u4F5C\uFF0C\u8FD8\u6709post/delete, any\u7B49</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u591A\u4E2A</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;get&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;post&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u89C6\u56FE\u8DEF\u7531</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/wel&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;wel&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;params&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;param&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-\u63A7\u5236\u5668\u8DEF\u7531" tabindex="-1"><a class="header-anchor" href="#_2-\u63A7\u5236\u5668\u8DEF\u7531" aria-hidden="true">#</a> 2. \u63A7\u5236\u5668\u8DEF\u7531</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// \u4F20\u9012\u7ED9 App\\Http\\Controllers\\WelcomeController \u63A7\u5236\u5668\u7684 index \u65B9\u6CD5\u8FDB\u884C\u5904\u7406</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;WelcomeController@index&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-\u8DEF\u7531\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#_3-\u8DEF\u7531\u53C2\u6570" aria-hidden="true">#</a> 3. \u8DEF\u7531\u53C2\u6570</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// \u83B7\u53D6\u52A8\u6001\u8DEF\u7531\u53C2\u6570</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;user/{id}&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token variable">$id</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u53EF\u9009\u83B7\u53D6\u52A8\u6001\u8DEF\u7531\u53C2\u6570</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;user/{id?}&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$id</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token variable">$id</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u6B63\u5219\u5339\u914D\u8DEF\u7531\u53C2\u6570</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;page/{id}/{slug}&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">,</span> <span class="token variable">$slug</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token variable">$id</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;:&quot;</span> <span class="token operator">.</span> <span class="token variable">$slug</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;id&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;[0-9]+&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;slug&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;[A-Za-z]+&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// \u5168\u5C40\u7EA6\u675F</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">pattern</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;[0-9]+&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-\u8DEF\u7531\u5206\u7EC4" tabindex="-1"><a class="header-anchor" href="#_4-\u8DEF\u7531\u5206\u7EC4" aria-hidden="true">#</a> 4. \u8DEF\u7531\u5206\u7EC4</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// \u6570\u7EC4\u5185\u63D0\u53D6\u5171\u540C\u7279\u5F81, \u7136\u540E\u5206\u6210\u591A\u7EC4</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;page1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;page2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//  \u516C\u7528\u4E2D\u95F4\u4EF6\uFF0C \u5B9A\u4E49\u5728App\\Http\\Middleware\u91CC \uFF0C\u5728App\\Http\\Kernel\u4E2D\u7BA1\u7406</span>
<span class="token comment">//  \u5176\u53C2\u6570\u53EF\u7528\u6570\u7EC4\uFF0C\u5982[&quot;auth&quot;, &quot;another&quot;]</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;auth&quot;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;dashboard&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string double-quoted-string">&quot;dashboard&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;account&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string double-quoted-string">&quot;account&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// \u5B9A\u4E49\u5171\u6709\u524D\u7F00</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">prefix</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;api&quot;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
<span class="token comment">// \u5171\u6709\u5B50\u57DF\u540D</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;admin.blog.test&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;{account}.blog.test&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;user/{id}&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$account</span><span class="token punctuation">,</span> <span class="token variable">$id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u5171\u6709\u547D\u540D\u7A7A\u95F4</span>
<span class="token comment">// \u516C\u7528\u547D\u540D\u7A7A\u95F4\u9ED8\u8BA4\u4E3AApp\\Http\\Controllers\uFF0C\u4FEE\u6539\u4E8Eapp/Providers/RouteServiceProvider.php</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">namespace</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Admin&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// App\\Http\\Controllers\\Admin\\AdminController       \u53EF\u5F97\u5230\u8BE5\u547D\u540D\u7A7A\u95F4</span>
    <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/admin&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;AdminController@index&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u547D\u540D\u8DEF\u7531\u524D\u7F00</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;user.&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">prefix</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;user&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;{id?}&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$id</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5904\u7406 /user/{id} \u8DEF\u7531\uFF0C\u8DEF\u7531\u547D\u540D\u4E3A user.show</span>
        <span class="token keyword">return</span> <span class="token function">route</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;user.show&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;show&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-\u8DEF\u7531\u6A21\u578B\u7ED1\u5B9A" tabindex="-1"><a class="header-anchor" href="#_5-\u8DEF\u7531\u6A21\u578B\u7ED1\u5B9A" aria-hidden="true">#</a> 5. \u8DEF\u7531\u6A21\u578B\u7ED1\u5B9A</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// \u5E94\u7528\u4F1A\u5C06\u4F20\u5165\u53C2\u6570\u503C\u8D4B\u503C\u7ED9 {task}\uFF0C\u7136\u540E\u9ED8\u8BA4\u4EE5\u53C2\u6570\u503C\u4F5C\u4E3A\u8D44\u6E90 ID \u5728\u5E95\u5C42\u901A\u8FC7 Eloquent \u67E5\u8BE2\u83B7\u53D6\u5BF9\u5E94\u6A21\u578B\u5B9E\u4F8B\uFF0C\u76F4\u63A5\u83B7\u53D6\u8D44\u6E90</span>
<span class="token comment">// Task \u7EE7\u627F\u81EA Illuminate\\Database\\Eloquent\\Model;</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;task/{id}&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$task</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\\</span>App<span class="token punctuation">\\</span>Models<span class="token punctuation">\\</span>Task</span><span class="token operator">::</span><span class="token function">findOrFail</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u9690\u5F0F\u7ED1\u5B9A</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;task/{user}&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name class-name-fully-qualified type-declaration"><span class="token punctuation">\\</span>App<span class="token punctuation">\\</span>Models<span class="token punctuation">\\</span>User</span> <span class="token variable">$user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// $user\u76F8\u5F53\u4E8EUser::find(user)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u663E\u793A\u7ED1\u5B9A\u5230RouteServiceProvider</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;user&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name class-name-fully-qualified static-context">App<span class="token punctuation">\\</span>User</span><span class="token operator">::</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token function">abort</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-\u515C\u5E95\u8DEF\u7531" tabindex="-1"><a class="header-anchor" href="#_6-\u515C\u5E95\u8DEF\u7531" aria-hidden="true">#</a> 6. \u515C\u5E95\u8DEF\u7531</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// \u515C\u5E95\u8DEF\u7531</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">fallback</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string single-quoted-string">&#39;\u6211\u662F\u6700\u540E\u7684\u5C4F\u969C&#39;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u8DEF\u7531\u5C4F\u969C</span>
<span class="token comment">// \u5728 Laravel \u4E2D\u8BE5\u529F\u80FD\u901A\u8FC7\u5185\u7F6E\u7684 throttle \u4E2D\u95F4\u4EF6\u6765\u5B9E\u73B0\uFF0C\u8BE5\u4E2D\u95F4\u4EF6\u63A5\u6536\u4E24\u4E2A\u53C2\u6570\uFF0C\u7B2C\u4E00\u4E2A\u662F\u6B21\u6570\u4E0A\u9650\uFF0C\u7B2C\u4E8C\u4E2A\u662F\u6307\u5B9A\u65F6\u95F4\u6BB5\uFF08\u5355\u4F4D\uFF1A\u5206\u949F\uFF09\uFF1A</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;throttle:60,1&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/user&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;throttle:rate_limit,1&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/user&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u5728 User \u6A21\u578B\u4E2D\u8BBE\u7F6E\u81EA\u5B9A\u4E49\u7684 rate_limit \u5C5E\u6027\u503C</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/post&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u5728 Post \u6A21\u578B\u4E2D\u8BBE\u7F6E\u81EA\u5B9A\u4E49\u7684 rate_limit \u5C5E\u6027\u503C</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-\u8DEF\u7531\u8BF7\u6C42\u4F2A\u9020" tabindex="-1"><a class="header-anchor" href="#_7-\u8DEF\u7531\u8BF7\u6C42\u4F2A\u9020" aria-hidden="true">#</a> 7. \u8DEF\u7531\u8BF7\u6C42\u4F2A\u9020</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// _method\u9690\u85CF\u57DF\uFF0C\u4F20\u51FA\u7684\u65B9\u6CD5\u4F1A\u88AB\u5F53\u505A\u771F\u6B63\u7684\u8DEF\u7531</span>
<span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string double-quoted-string">&quot;/task/1&quot;</span> method<span class="token operator">=</span><span class="token string double-quoted-string">&quot;POST&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;hidden&quot;</span> name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;_method&quot;</span> value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;DELETE&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
<span class="token comment">// \u907F\u514D[\u8DE8\u7AD9\u8BF7\u6C42\u4F2A\u9020\u653B\u51FB]\uFF08CSRF\uFF09</span>
<span class="token comment">// \u9ED8\u8BA4\u6240\u6709\u7684\u8DEF\u7531\u5747\u662F   \u53EA\u8BFB\uFF0C \u5982\u679C\u5199\u5165\u9700\u8981\u4F20\u5165_token</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string double-quoted-string">&quot;hidden&quot;</span> name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;_token&quot;</span> value<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{{ csrf_token() }}&quot;</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u56DB-\u89C6\u56FE\u6A21\u578B" tabindex="-1"><a class="header-anchor" href="#\u56DB-\u89C6\u56FE\u6A21\u578B" aria-hidden="true">#</a> \u56DB. \u89C6\u56FE\u6A21\u578B</h2><h3 id="_1-view" tabindex="-1"><a class="header-anchor" href="#_1-view" aria-hidden="true">#</a> 1. view</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// \u8FD4\u56DEresource/views\u4E0B\u7684\u89C6\u56FE\uFF0C\u5E76\u4F20\u53C2</span>
<span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;page.show&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">view</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;page.show&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;id&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$id</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$name</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u89C6\u56FE\u95F4\u5171\u4EAB\u53D8\u91CF, AppServiceProvider \u7684 boot \u65B9\u6CD5\u4E2D\u5B9A\u4E49\u5982\u4E0B\u5185\u5BB9\uFF0C\u4FBF\u80FD\u5728\u8BF4\u6709blade\u9875\u9762\u4E2D\u8BBF\u95EE\u8BE5\u53D8\u91CF</span>
<span class="token function">view</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">share</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;siteName&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;Laravel\u5B66\u9662&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-blade-\u8BED\u6CD5" tabindex="-1"><a class="header-anchor" href="#_2-blade-\u8BED\u6CD5" aria-hidden="true">#</a> 2. blade \u8BED\u6CD5</h3><div class="language-PHP ext-PHP line-numbers-mode"><pre class="language-PHP"><code>// blade\u9875\u9762\u4F1A\u88AB\u7F16\u8BD1\u7136\u540E\u7F13\u5B58\u5230storage/framework/views
// \u901A\u8FC7 {{ }} \u6E32\u67D3 PHP \u53D8\u91CF\uFF08\u6700\u5E38\u7528\uFF09
{{ $name }}
// \u901A\u8FC7 {!! !!} \u6E32\u67D3\u539F\u751F HTML \u4EE3\u7801\uFF08\u7528\u4E8E\u5BCC\u6587\u672C\u6570\u636E\u6E32\u67D3\uFF09
{!! $name !!}
// \u901A\u8FC7\u4EE5 @ \u4F5C\u4E3A\u524D\u7F00\u7684 Blade \u6307\u4EE4\u6267\u884C\u4E00\u4E9B\u63A7\u5236\u7ED3\u6784\u548C\u7EE7\u627F\u3001\u5F15\u5165\u4E4B\u7C7B\u7684\u64CD\u4F5C
@php
// Blade \u5F15\u64CE\u7F16\u8BD1\u65F6\u4F1A\u79FB\u9664 @\uFF0C\u4FDD\u7559 {{ $vueData }} \u7ED3\u6784
@{{ $vueData }}
// \u6CE8\u91CA
{{-- \u6CE8\u91CA\u5185\u5BB9 --}}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-\u7ED3\u6784\u63A7\u5236" tabindex="-1"><a class="header-anchor" href="#_3-\u7ED3\u6784\u63A7\u5236" aria-hidden="true">#</a> 3. \u7ED3\u6784\u63A7\u5236</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// \u6761\u4EF6\u8BED\u53E5</span>
@<span class="token keyword">if</span>\u3001@<span class="token keyword">else</span>\u3001@<span class="token keyword">elseif</span>
<span class="token comment">// \u9664\u975E</span>
@unless
@<span class="token keyword">isset</span>\u3001@<span class="token keyword">empty</span>
<span class="token comment">// \u5206\u652F\u8BED\u53E5</span>
@<span class="token keyword">switch</span>\u3001@<span class="token keyword">case</span>\u3001@<span class="token keyword">break</span>\u3001@<span class="token keyword">default</span> \u548C @<span class="token keyword">endswitch</span>
<span class="token comment">// \u5FAA\u73AF\u8BED\u53E5 \uFF0C \u81EA\u5E26$loop\u53D8\u91CF</span>
@<span class="token keyword">for</span>\u3001@<span class="token keyword">foreach</span> \u548C @<span class="token keyword">while</span>
@forelse
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-\u6A21\u677F\u7EE7\u627F-\u548C-\u7EC4\u4EF6\u5F15\u5165" tabindex="-1"><a class="header-anchor" href="#_4-\u6A21\u677F\u7EE7\u627F-\u548C-\u7EC4\u4EF6\u5F15\u5165" aria-hidden="true">#</a> 4. \u6A21\u677F\u7EE7\u627F \u548C \u7EC4\u4EF6\u5F15\u5165</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// \u5B9A\u4E49\u63D2\u69FD</span>
<span class="token comment">// @yield</span>
@<span class="token keyword">yield</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;\u9ED8\u8BA4\u503C&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// @section/@show \u53EF\u4EE5\u5C06\u5B50\u89C6\u56FE\u4F20\u9012\u7ED9\u7EE7\u627F\u6A21\u677F</span>
@section<span class="token operator">/</span>@show

<span class="token comment">// \u7EE7\u627F\u63D2\u69FD</span>
@<span class="token keyword">extends</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;layout&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// \u5185\u5BB9 @parent \u80FD\u7EE7\u4E0A\u7EA7\u627F\u4F20\u8FC7\u6765\u7684\u5185\u5BB9</span>
@section<span class="token operator">/</span>@endsection

<span class="token comment">// \u5F15\u5165\u5176\u4ED6\u7EC4\u4EF6\u8BD5\u56FE,(\u5C31\u662F\u4E00\u4E2Ablade\u7247\u6BB5)</span>
@<span class="token keyword">include</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;com.view&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;text&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;\u8FD9\u662F\u4F20\u5165\u7EC4\u4EF6\u7684\u503C&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// @each \u6307\u4EE4\u652F\u6301\u591A\u4E2A\u53C2\u6570\uFF0C\u7B2C\u4E00\u4E2A\u53C2\u6570\u7528\u4E8E\u6307\u5B9A\u8981\u5FAA\u73AF\u5F15\u5165\u7684\u7EC4\u4EF6\u540D\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F\u8981\u904D\u5386\u7684\u96C6\u5408\u53D8\u91CF\uFF0C\u7B2C\u4E09\u4E2A\u53C2\u6570\u662F\u5728\u5F15\u5165\u7EC4\u4EF6\u4E2D\u4F7F\u7528\u7684\u53D8\u91CF\u540D\uFF08\u5BF9\u5E94 $modules \u96C6\u5408\u4E2D\u5355\u4E2A\u5143\u7D20\uFF09\uFF0C\u6700\u540E\u4E00\u4E2A\u53C2\u6570\u662F\u96C6\u5408\u6570\u636E\u4E3A\u7A7A\u65F6\u5F15\u5165\u7684\u9ED8\u8BA4\u7EC4\u4EF6\u3002</span>
@<span class="token function">each</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;partials.module&#39;</span><span class="token punctuation">,</span> <span class="token variable">$modules</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;module&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;partials.empty-module&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// \u63D2\u69FD\u5206\u53D1 @component\u7C7B\u4F3Cinclude\u5F15\u5165\u4E00\u4E2A\u7EC4\u4EF6</span>
@slot \u548C @<span class="token function">component</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;\u6A21\u677F&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;title&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;\u4F20\u503C&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-\u9884\u8BBE\u89C6\u56FE\u7EC4\u4EF6\u6570\u636E\u53D8\u91CF" tabindex="-1"><a class="header-anchor" href="#_5-\u9884\u8BBE\u89C6\u56FE\u7EC4\u4EF6\u6570\u636E\u53D8\u91CF" aria-hidden="true">#</a> 5. \u9884\u8BBE\u89C6\u56FE\u7EC4\u4EF6\u6570\u636E\u53D8\u91CF</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// app/Providers/AppServiceProvider.php \u7684 boot \u65B9\u6CD5</span>
<span class="token function">view</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">composer</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;partials.header&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;partials.*&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$view</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$view</span><span class="token operator">-&gt;</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;posts&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$value</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// app/Http/ViewComposers \u76EE\u5F55\u4E0B\u521B\u5EFA\u4E00\u4E2A\u81EA\u5B9A\u4E49 View Composer \u7C7B RecentPostsComposer.php,</span>
<span class="token comment">// \u5F53\u6211\u4EEC\u5728 View Composer \u4E2D\u8C03\u7528 RecentPostsComposer \u7C7B\u7684\u65F6\u5019\uFF0Ccompose \u65B9\u6CD5\u4F1A\u88AB\u81EA\u52A8\u8C03\u7528\u4ECE\u800C\u5B8C\u6210\u53D8\u91CF\u9884\u8BBE\uFF1A</span>
<span class="token function">view</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">composer</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">&#39;partials.sidebar&#39;</span><span class="token punctuation">,</span> <span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\\</span>App<span class="token punctuation">\\</span>Http<span class="token punctuation">\\</span>ViewComposers<span class="token punctuation">\\</span>RecentPostsComposer</span><span class="token operator">::</span><span class="token keyword">class</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-\u6CE8\u5165\u670D\u52A1" tabindex="-1"><a class="header-anchor" href="#_6-\u6CE8\u5165\u670D\u52A1" aria-hidden="true">#</a> 6. \u6CE8\u5165\u670D\u52A1</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code>@<span class="token function">inject</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;analytics&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;App\\Services\\Analytics&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_7-\u81EA\u5B9A\u4E49-blade-\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_7-\u81EA\u5B9A\u4E49-blade-\u547D\u4EE4" aria-hidden="true">#</a> 7. \u81EA\u5B9A\u4E49 blade \u547D\u4EE4</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code>// \u5728 AppServiceProvider \u7684 boot \u65B9\u6CD5\u4E2D\u6CE8\u518C\u8FD9\u4E2A\u6307\u4EE4
Blade::directive(&#39;datetime&#39;, function($expression) {
    return &quot;<span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token punctuation">(</span><span class="token variable">$expression</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Y/m/d H:i:s&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?&gt;</span></span>&quot;;
});
// \u6307\u4EE4\u7EDF\u4E00\u663E\u793A\u6307\u5B9A\u683C\u5F0F\u7684\u65E5\u671F\u65F6\u95F4\u4E86\u3002
@datetime($time)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4E94-\u5904\u7406\u8BF7\u6C42" tabindex="-1"><a class="header-anchor" href="#\u4E94-\u5904\u7406\u8BF7\u6C42" aria-hidden="true">#</a> \u4E94. \u5904\u7406\u8BF7\u6C42</h2><h3 id="_1-\u6CE8\u5165\u8BF7\u6C42\u5BF9\u8C61" tabindex="-1"><a class="header-anchor" href="#_1-\u6CE8\u5165\u8BF7\u6C42\u5BF9\u8C61" aria-hidden="true">#</a> 1. \u6CE8\u5165\u8BF7\u6C42\u5BF9\u8C61</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// \u95E8\u9762\u83B7\u53D6</span>
<span class="token comment">// use Illuminate\\Support\\facades\\Input</span>
<span class="token variable">$task</span><span class="token operator">-&gt;</span><span class="token property">title</span> <span class="token operator">=</span> <span class="token class-name static-context">Input</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// use Illuminate\\Http\\Request; \u548C request() \u95E8\u9762</span>
<span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// \u5168\u90E8</span>
<span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">except</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;id&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u6392\u9664</span>
<span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">only</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;site&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;domain&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u53EA\u8981</span>
<span class="token comment">// \u5148\u884C\u5224\u65ADhas, exists</span>
<span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;id&#39;</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;id&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">// \u83B7\u53D6\u67D0\u4E00\u503C get, post, input, \u83B7\u53D6\u6570\u7EC4\u4E2D\u7684\u67D0\u4E00\u4E2A</span>
<span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">input</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;books.0.author&#39;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;\u8BBE\u7F6E\u9ED8\u8BA4\u503C&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u57FA\u6570\u4ECE1\u5F00\u59CB</span>
<span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">segments</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// \u5E26\u7740\u8BF7\u6C42\u8DF3\u8F6C</span>
<span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;form&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">withInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u5B58\u50A8\u4F7F\u7528\u4E0A\u4E00\u6B21\u8BF7\u6C42</span>
<span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">flash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">old</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-\u4E0A\u4F20\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_2-\u4E0A\u4F20\u6587\u4EF6" aria-hidden="true">#</a> 2. \u4E0A\u4F20\u6587\u4EF6</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># $request-&gt;file() \u65B9\u6CD5\u83B7\u53D6\u7684\u662F\u4E00\u4E2A Illuminate\\Http\\UploadedFile \u5BF9\u8C61\u5B9E\u4F8B</span>
<span class="token comment"># \u4F7F\u7528\u4E86 Storage::disk(&#39;public&#39;) \u78C1\u76D8\u5C06\u4E0A\u4F20\u6587\u4EF6\u4FDD\u5B58\u5230\u672C\u5730\uFF0C\u5173\u4E8E\u8BE5\u78C1\u76D8\u7684\u81EA\u5B9A\u4E49\u914D\u7F6E\u4FE1\u606F\u53EF\u4EE5\u53BB config/filesystems.php \u6587\u4EF6\u4E2D\u67E5\u770B</span>
<span class="token comment"># \u5982\u679C\u8981\u8BA9\u4E0A\u4F20\u5230 storage/app/public \u76EE\u5F55\u7684\u6587\u4EF6\u53EF\u4EE5\u88AB\u5916\u90E8\u8BBF\u95EE\uFF0C\u8FD8\u8981\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4</span>
php artisan storage:link
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;picture&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>picture<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/form/file_upload&quot;</span><span class="token punctuation">,</span> formData<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;Content-Type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;multipart/form-data&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-\u8868\u5355\u9A8C\u8BC1" tabindex="-1"><a class="header-anchor" href="#_3-\u8868\u5355\u9A8C\u8BC1" aria-hidden="true">#</a> 3. \u8868\u5355\u9A8C\u8BC1</h3>`,36),_={href:"https://laravelacademy.org/post/9547.html#toc_17",target:"_blank",rel:"noopener noreferrer"},x=s("\u9A8C\u8BC1\u89C4\u5219\u6587\u6863"),$=s(" \u5199\u5165\u8DEF\u7531\u5E94\u8BE5\u6709@csrf \u9A8C\u8BC1"),D=p(`<div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// Illuminate\\Foundation\\Validation\\ValidatesRequests;</span>
 <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">&#39;title&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;bail|required|string|between:2,32&#39;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">&#39;title.required&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;\u81EA\u5B9A\u4E49\u63D0\u793A&#39;</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">&#39;title.string&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;\u53EF\u9009&#39;</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">&#39;title.between&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;\u6807\u9898\u957F\u5EA6\u5FC5\u987B\u4ECB\u4E8E2-32\u4E4B\u95F4&#39;</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u7C7B\u4F7F\u7528</span>
<span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\\</span>Validator</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// $validator-&gt;fails();</span>
<span class="token comment">// $validator-&gt;errors()-&gt;all();</span>

<span class="token comment">// \u7EE7\u627F\u4F7F\u7528</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\\</span>Foundation<span class="token punctuation">\\</span>Http<span class="token punctuation">\\</span>FormRequest</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u516D-\u6570\u636E\u5E93\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#\u516D-\u6570\u636E\u5E93\u67E5\u8BE2" aria-hidden="true">#</a> \u516D. \u6570\u636E\u5E93\u67E5\u8BE2</h2><h3 id="_1-\u8FDE\u63A5" tabindex="-1"><a class="header-anchor" href="#_1-\u8FDE\u63A5" aria-hidden="true">#</a> 1. \u8FDE\u63A5</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// config/database.php\u4E2D\u914D\u7F6E</span>
<span class="token comment">// \u9ED8\u8BA4\u8FDE\u63A5mysql\u914D\u7F6E\uFF0Cconnection\u53EF\u4EE5\u8FDB\u884C\u9009\u62E9\uFF0C</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">connection</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;mysql_old&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//  Eloquent \u6A21\u578B\u7C7B \u4E2D</span>
<span class="token keyword">protected</span> <span class="token variable">$connection</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;mysql_old&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// \u8BFB\u5199\u5206\u79BB, \u5728database.php\u4E2D\u914D\u7F6E</span>
<span class="token string single-quoted-string">&#39;mysql&#39;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">&#39;driver&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;mysql&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;read&#39;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">&#39;host&#39;</span> <span class="token operator">=&gt;</span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;DB_HOST_READ&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;127.0.0.1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;write&#39;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">&#39;host&#39;</span> <span class="token operator">=&gt;</span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;DB_HOST_WRITE&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;127.0.0.1&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

<span class="token comment">// \u6570\u636E\u5E93\u8FC1\u79FB</span>
<span class="token comment">// \u521B\u5EFA\u8FC1\u79FB\u7C7B</span>
php artisan make<span class="token punctuation">:</span>migration create_users_table
<span class="token comment">// \u6267\u884C\u8FC1\u79FB</span>
php artisan migrate
<span class="token comment">// \u56DE\u6EDA\u8FC1\u79FB</span>
php artisan migrate<span class="token punctuation">:</span>rollback

<span class="token comment">// \u6570\u636E\u5E93\u586B\u5145</span>
<span class="token comment"># \u521B\u5EFA\u586B\u5145\u7C7B</span>
php artisan make<span class="token punctuation">:</span>seeder UsersTableSeeder
<span class="token comment"># \u6267\u884C\u586B\u5145</span>
php artisan db<span class="token punctuation">:</span>seed <span class="token operator">--</span><span class="token keyword">class</span><span class="token operator">=</span>UsersTableSeeder
<span class="token comment">// \u6216\u8005\u52A0\u5165\u96C6\u4F53\u6267\u884C</span>
php artisan db<span class="token punctuation">:</span>seed
<span class="token comment">// \u6216\u52A0\u5165Seeder</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token class-name static-context">UsersTableSeeder</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u901A\u8FC7\u6A21\u578B\u5DE5\u5382\u586B\u5145\u6570\u636E</span>
<span class="token comment">// \u521B\u5EFA\u5DE5\u5382  database/factories \u91CC</span>
<span class="token comment">// \u52A0\u5165\u6267\u884C  database/seeds \u52A0\u5165run\u51FD\u6570\u91CC\uFF0C \u6267\u884C\u586B\u5145\u65F6\u4F1A\u8C03\u7528</span>
<span class="token function">factory</span><span class="token punctuation">(</span><span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\\</span>App<span class="token punctuation">\\</span>User</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u6267\u884C\u586B\u5145</span>
php artisan db<span class="token punctuation">:</span>seed <span class="token operator">--</span><span class="token keyword">class</span><span class="token operator">=</span>UsersTableSeeder
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#_2-\u64CD\u4F5C" aria-hidden="true">#</a> 2. \u64CD\u4F5C</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// DB\u95E8\u9762\u7528\u4E8E\u64CD\u4F5C\u6570\u636E\u5E93,  use Illuminate\\Database\\Eloquent\\Model;</span>
<span class="token comment">// statement \u7528\u539F\u751Fsql\u64CD\u4F5C\u6570\u636E\u5E93</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">statement</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;drop table \`users\`&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// DB\u63D0\u4F9B\u7684\u539F\u751F\u8BED\u53E5\u65B9\u6CD5\uFF0C select\uFF0C insert\uFF0C update\uFF0C delete\u7B49</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;select * from \`users\` where \`name\` = ?&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token variable">$name</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;select * from \`users\` where \`name\` = :name&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$name</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u67E5\u8BE2\u6784\u5EFA\u5668\u8FDB\u884C\u589E\u5220\u6539\u67E5  select\uFF0C insert\uFF0C update\uFF0C delete\u7B49</span>
<span class="token comment">// get \u83B7\u53D6\uFF0C first \u7B2C\u4E00\u6761</span>
<span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\\</span>DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token variable">$name</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\\</span>DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;email&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token variable">$name</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u63D2\u5165\u6570\u636E</span>
<span class="token comment">// DB::table(&#39;users&#39;)-&gt;insertGetId    \u8FD9\u4E2A\u53EF\u4EE5\u8FD4\u56DE\u4E3B\u952E</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token function">str_random</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;email&#39;</span> <span class="token operator">=&gt;</span> <span class="token function">str_random</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string single-quoted-string">&#39;@163.com&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;password&#39;</span> <span class="token operator">=&gt;</span> <span class="token function">bcrypt</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;secret&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u63D2\u5165\u591A\u6761\u8BB0\u5F55</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;\u5F20\u4E09&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;password&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;123&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;\u674E\u56DB&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;password&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;456&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// \u66F4\u65B0\u4E00\u6761\u8BB0\u5F55</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;&gt;&#39;</span><span class="token punctuation">,</span> <span class="token variable">$id</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token function">str_random</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// \u66F4\u65B0\u6570\u503C increment \u548C decrement</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;views&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// views+1</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;views&#39;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// views+5</span>
<span class="token comment">// \u5220\u9664</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;&gt;=&#39;</span><span class="token punctuation">,</span> <span class="token variable">$id</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u91CD\u7F6E\u81EA\u589E\u8BB0\u5F55 truncate  \u4F1A\u6E05\u7A7A\u8868</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">truncate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-\u590D\u6742\u7684-sql-\u8BED\u53E5" tabindex="-1"><a class="header-anchor" href="#_3-\u590D\u6742\u7684-sql-\u8BED\u53E5" aria-hidden="true">#</a> 3. \u590D\u6742\u7684 sql \u8BED\u53E5</h3>`,7),B={href:"https://laravelacademy.org/post/9698.html",target:"_blank",rel:"noopener noreferrer"},R=s("\u590D\u6742\u7684 sql"),P=p(`<div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// \u5FEB\u901F\u83B7\u53D6\u5B57\u6BB5\u7684\u503C, \u5982\u679C\u662F\u6570\u7EC4\u53EA\u80FD\u83B7\u53D6\u7B2C\u4E00\u4E2A</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;user&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u5224\u65AD\u662F\u5426\u5B58\u5728\uFF0C \u4E0E\u4E4B\u76F8\u5BF9\u7684\u65B9\u6CD5 doesntExist()\u3002</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token variable">$name</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u5F62\u6210\u5173\u8054\u6570\u7EC4, \u503C\u5728\u524D\uFF0C\u952E\u5728\u540E</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;user&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">pluck</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;id&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u6570\u636E\u8F83\u5927\u65F6\u5206\u5757</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;id&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">chunk</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$users</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token variable">$names</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$users</span> <span class="token keyword">as</span> <span class="token variable">$user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$names</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">name</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// count\u3001sum\u3001avg\u3001min\u3001max \u805A\u5408\u51FD\u6570</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment"># \u8BA1\u6570     9</span>

<span class="token comment">// \u9AD8\u7EA7\u67E5\u8BE2</span>
<span class="token comment">// like</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;like&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;Laravel\u5B66\u9662%&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// and</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;&lt;&#39;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;views&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;&gt;&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;&lt;&#39;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;views&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;&gt;&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// or</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;&lt;&#39;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">orWhere</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;views&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;&gt;&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// between</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">whereBetween</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;views&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">whereNotBetween</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;views&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// in</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">whereIn</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;user_id&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// null</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">whereNull</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;email_verified_at&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// notNull</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">whereNotNull</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;email_verified_at&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u65E5\u671F whereYear  whereMonth  whereDay  whereTime</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">whereDate</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;created_at&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;2018-11-28&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment"># \u5177\u4F53\u65E5\u671F</span>
<span class="token comment">// \u5B57\u6BB5\u95F4\u6BD4\u8F83</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">whereColumn</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;updated_at&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;&gt;&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;created_at&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// json\u5B57\u6BB5\u67E5\u8BE2\uFF0Coptions\u662F\u4E00\u4E2Ajson\u5B57\u6BB5</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;options-&gt;language&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;en&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">whereJsonContains</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;options-&gt;languages&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;en_US&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;zh_CN&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u53C2\u6570\u5206\u7EC4\uFF0C\u793A\u4F8B\u5BF9\u5E94select * from posts where id &lt;= 10 or (views &gt; 0 and created_at &lt; &#39;2018-11-28 14:00&#39;);</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;&lt;=&#39;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">orWhere</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;views&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;&gt;&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">whereDate</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;created_at&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;&lt;&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;2018-11-28&#39;</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">whereTime</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;created_at&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;&lt;&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;14:00&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// whereExists\uFF0C select * from \`users\` where exists (select 1 from \`posts\` where posts.user_id = users.id);</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">whereExists</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">raw</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">whereRaw</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts.user_id = users.id&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-\u8054\u8868\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_4-\u8054\u8868\u67E5\u8BE2" aria-hidden="true">#</a> 4. \u8054\u8868\u67E5\u8BE2</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// \u7B49\u503C\u94FE\u63A5\uFF0C inner \u662F\u4EA4\u96C6</span>
<span class="token constant">SELECT</span> <span class="token operator">*</span><span class="token punctuation">,</span> g<span class="token operator">.</span>id <span class="token keyword">as</span> gid from users u <span class="token constant">INNER</span> <span class="token constant">JOIN</span> user_group g on u<span class="token operator">.</span>group_id <span class="token operator">=</span> g<span class="token operator">.</span>id<span class="token punctuation">;</span>
<span class="token comment">// \u4E0D\u7B49\u94FE\u63A5 &lt; , &gt; , &lt;&gt;</span>
<span class="token constant">SELECT</span> <span class="token operator">*</span><span class="token punctuation">,</span> g<span class="token operator">.</span>id <span class="token keyword">as</span> gid from users u <span class="token constant">INNER</span> <span class="token constant">JOIN</span> user_group g on u<span class="token operator">.</span>group_id <span class="token operator">&lt;</span><span class="token operator">&gt;</span> g<span class="token operator">.</span>id<span class="token punctuation">;</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span>
<span class="token operator">-&gt;</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;user_group&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;users.id&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;=&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;user_group.id&#39;</span><span class="token punctuation">)</span>
<span class="token operator">-&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;user_group.id as gid&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;users.name&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;users.password&#39;</span><span class="token punctuation">)</span>
<span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u5DE6\u94FE\u63A5\uFF0C \u8FD4\u56DE\u5DE6\u8868\u4E2D\u7684\u6240\u6709\u884C\uFF0C\u5982\u679C\u5DE6\u8868\u4E2D\u7684\u884C\u5728\u53F3\u8868\u4E2D\u6CA1\u6709\u5339\u914D\u884C\uFF0C\u5219\u8FD4\u56DE\u7ED3\u679C\u4E2D\u53F3\u8868\u4E2D\u7684\u5BF9\u5E94\u5217\u8FD4\u56DE\u7A7A</span>
<span class="token constant">SELECT</span> <span class="token operator">*</span><span class="token punctuation">,</span> g<span class="token operator">.</span>id <span class="token keyword">as</span> gid from users u left <span class="token constant">JOIN</span> user_group g on u<span class="token operator">.</span>group_id <span class="token operator">=</span> g<span class="token operator">.</span>id<span class="token punctuation">;</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span>
<span class="token operator">-&gt;</span><span class="token function">leftJoin</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;user_group&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;users.id&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;=&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;user_group.id&#39;</span><span class="token punctuation">)</span>
<span class="token operator">-&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;user_group.id as gid&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;users.name&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;users.password&#39;</span><span class="token punctuation">)</span>
<span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u53F3\u94FE\u63A5\uFF0C\u8FD4\u56DE\u53F3\u8868\u4E2D\u7684\u6240\u6709\u884C\uFF0C\u5982\u679C\u53F3\u8868\u4E2D\u7684\u884C\u5728\u5DE6\u8868\u4E2D\u6CA1\u6709\u5339\u914D\u884C\uFF0C\u5219\u7ED3\u679C\u4E2D\u5DE6\u8868\u4E2D\u7684\u5BF9</span>
<span class="token constant">SELECT</span> <span class="token operator">*</span><span class="token punctuation">,</span> g<span class="token operator">.</span>id <span class="token keyword">as</span> gid from users u right <span class="token constant">JOIN</span> user_group g on u<span class="token operator">.</span>group_id <span class="token operator">=</span> g<span class="token operator">.</span>id<span class="token punctuation">;</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span>
<span class="token operator">-&gt;</span><span class="token function">rightJoin</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;user_group&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;users.id&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;=&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;user_group.id&#39;</span><span class="token punctuation">)</span>
<span class="token operator">-&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;user_group.id as gid&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;users.name&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;users.password&#39;</span><span class="token punctuation">)</span>
<span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u5168\u8FDE\u63A5\uFF0C\u5DE6+\u53F3\uFF0C full join</span>
<span class="token comment">// \u4EA4\u53C9\u94FE\u63A5\uFF0C\u7B1B\u5361\u5C14\u79EF\uFF0C\u5DE6 * \u53F3</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span>
<span class="token operator">-&gt;</span><span class="token function">crossJoin</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;user_group&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;users.id&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;=&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;user_group.id&#39;</span><span class="token punctuation">)</span>
<span class="token operator">-&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;user_group.id as gid&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;users.name&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;users.password&#39;</span><span class="token punctuation">)</span>
<span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u533F\u540D\u7EC4\u88C5</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;user_group&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$join</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$join</span><span class="token operator">-&gt;</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;user_group.id&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;=&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;users.group_id&#39;</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">whereNotNull</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;user_group.allowed&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;user_group.id as gid&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;user_group.allowed&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;users.name&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;users.password&#39;</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;user_group.allowed&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;&gt;&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u8054\u5408\u67E5\u8BE2, \u628A\u4E24\u6B21\u67E5\u8BE2\u7684\u5185\u5BB9\u5408\u5728\u4E00\u8D77</span>
<span class="token punctuation">(</span>select <span class="token operator">*</span> from <span class="token string backtick-quoted-string">\`users\`</span> where <span class="token string backtick-quoted-string">\`group_id\`</span> <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token function">union</span> <span class="token punctuation">(</span>select <span class="token operator">*</span> from <span class="token string backtick-quoted-string">\`users\`</span> where <span class="token string backtick-quoted-string">\`password\`</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;6666&#39;</span><span class="token punctuation">)</span>
<span class="token variable">$posts_a</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\\</span>DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;password&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;6666&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$posts_b</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\\</span>DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;group_id&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;&lt;=&#39;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">union</span><span class="token punctuation">(</span><span class="token variable">$posts_a</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u6392\u5E8F desc \u964D\u5E8F\uFF0C asc \u5347\u5E8F</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;created_at&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;desc&#39;</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u968F\u673A\u6392\u5E8F</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">inRandomOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u5206\u7EC4 , having()\u53EF\u4EE5\u8FC7\u6EE4\u4E0D\u6EE1\u8DB3\u7684\u7ED3\u679C</span>
select user_id<span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>views<span class="token punctuation">)</span> <span class="token keyword">as</span> total_views from <span class="token string backtick-quoted-string">\`posts\`</span> group by <span class="token string backtick-quoted-string">\`user_id\`</span><span class="token punctuation">;</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">groupBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;user_id&#39;</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">selectRaw</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;user_id, sum(views) as total_views&#39;</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">having</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;total_views&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;&gt;=&#39;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u5206\u9875</span>
<span class="token comment">// skip\u4ECE\u7B2C\u51E0\u4E2A\u5F00\u59CB\uFF0Ctake\u53D6\u51E0\u6761\u6570\u636E</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// offset\u4ECE\u7B2C\u51E0\u4E2A\u5F00\u59CB\uFF0Climit\u53D6\u51E0\u6761\u6570\u636E</span>
<span class="token class-name static-context">DB</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4E03-eloquent-\u6A21\u578B\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u4E03-eloquent-\u6A21\u578B\u7C7B" aria-hidden="true">#</a> \u4E03. Eloquent \u6A21\u578B\u7C7B</h2>`,4),S=s("\u652F\u6301 DB \u7C7B\u7684\u5404\u79CD\u65B9\u6CD5 "),T={href:"https://laravelacademy.org/post/19531.html",target:"_blank",rel:"noopener noreferrer"},E=s("Eloquent \u6A21\u578B"),C=p(`<h3 id="_1-\u67E5\u627E" tabindex="-1"><a class="header-anchor" href="#_1-\u67E5\u627E" aria-hidden="true">#</a> 1. \u67E5\u627E</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// Eloquent \u6A21\u578B\uFF0Cuse Illuminate\\Database\\Eloquent\\Model;</span>
<span class="token comment">// php artisan make:model Models/User\uFF0C \u7136\u540E\u5199\u5165</span>
<span class="token keyword">protected</span> <span class="token variable">$connection</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;mysql&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">protected</span> <span class="token variable">$table</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">protected</span> <span class="token variable">$primaryKey</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;id&#39;</span><span class="token punctuation">;</span>
<span class="token comment">// \u83B7\u53D6\u6240\u6709\u8868</span>
<span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\\</span>User</span><span class="token operator">::</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u6BCF\u6B21\u83B7\u53D6\u4E00\u6761</span>
<span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\\</span>User</span><span class="token operator">::</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u6839\u636E\u4E3B\u952E\u83B7\u53D6, firstOrFail \u4F1A\u76F4\u63A5\u8FD4\u56DE404\u9875\u9762</span>
<span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\\</span>User</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\\</span>Post</span><span class="token operator">::</span><span class="token function">cursor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token variable">$post</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">dump</span><span class="token punctuation">(</span><span class="token variable">$post</span><span class="token operator">-&gt;</span><span class="token property">title</span> <span class="token operator">.</span> <span class="token string single-quoted-string">&#39;:&#39;</span> <span class="token operator">.</span> <span class="token variable">$post</span><span class="token operator">-&gt;</span><span class="token property">content</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// \u83B7\u53D6\u6307\u5B9A\u67E5\u8BE2\u7ED3\u679C</span>
<span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\\</span>User</span><span class="token operator">::</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;views&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;&gt;&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;desc&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-\u63D2\u5165" tabindex="-1"><a class="header-anchor" href="#_2-\u63D2\u5165" aria-hidden="true">#</a> 2. \u63D2\u5165</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// \u5B9E\u4F8B\u5316\uFF0C\u8C03\u7528save()\u65B9\u6CD5</span>
<span class="token variable">$post</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified">App<span class="token punctuation">\\</span>Post</span><span class="token punctuation">;</span>
<span class="token variable">$post</span><span class="token operator">-&gt;</span><span class="token property">username</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;\u540D\u5B57&#39;</span><span class="token punctuation">;</span>
<span class="token variable">$post</span><span class="token operator">-&gt;</span><span class="token property">password</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;\u5BC6\u7801&#39;</span><span class="token punctuation">;</span>
<span class="token variable">$post</span><span class="token operator">-&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u5FEB\u6377\u7684\u63D2\u5165\u65B9\u6CD5\uFF0C\u6BD4\u5982 firstOrCreate \u548C firstOrNew(\u4E0D\u4F1A\u63D2\u5165\u6570\u636E\u5E93)\uFF0C\u5148\u67E5\u8BE2\uFF0C\u627E\u4E0D\u5230\u5C31\u63D2\u5165\uFF0C\u9700\u8981fillable\u91CC\u52A0\u4E0A\u5BF9\u5E94\u7684\u5B57\u6BB5</span>
<span class="token keyword">protected</span> <span class="token variable">$fillable</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;email&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">firstOrCreate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;\u6D4B\u8BD5\u6587\u7AE0\u6807\u98981&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;email&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-\u66F4\u65B0\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#_3-\u66F4\u65B0\u6570\u636E" aria-hidden="true">#</a> 3. \u66F4\u65B0\u6570\u636E</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// \u53D6\u51FA\u4FEE\u6539\uFF0C\u7136\u540E\u5B58\u50A8\u3002\u591A\u6761\u7528\u5FAA\u73AF\u4F9D\u6B21\u4FEE\u6539</span>
<span class="token variable">$post</span> <span class="token operator">=</span> <span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">31</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$post</span><span class="token operator">-&gt;</span><span class="token property">title</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;\u6D4B\u8BD5\u6587\u7AE0\u6807\u9898\u66F4\u65B0&#39;</span><span class="token punctuation">;</span>
<span class="token variable">$post</span><span class="token operator">-&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u5FEB\u6377\u7684\u66F4\u65B0\u65B9\u6CD5 updateOrCreate\uFF0C\u627E\u4E0D\u5230\u5C31\u65B0\u5EFA\u540C\u4E0A</span>
<span class="token variable">$user</span> <span class="token operator">=</span> <span class="token class-name static-context">user</span><span class="token operator">::</span><span class="token function">updateOrCreate</span><span class="token punctuation">(</span>
    <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;\u5B66\u9662\u541B&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;email&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;admin@laravelacademy.org&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-\u5220\u9664" tabindex="-1"><a class="header-anchor" href="#_4-\u5220\u9664" aria-hidden="true">#</a> 4. \u5220\u9664</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// \u627E\u5230\u5C31\u5220\u9664</span>
<span class="token variable">$user</span> <span class="token operator">=</span> <span class="token class-name static-context">Users</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u8F6F\u5220\u9664</span>
<span class="token comment">// \u5728\u6A21\u578B\u7C7B\u7684\u4E2D\u4F7F\u7528SoftDEletes\uFF0C\u5C31\u80FD\u9690\u53BB\u88AB\u8F6F\u5220\u9664\u7684\u7ED3\u679C</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\\</span>Database<span class="token punctuation">\\</span>Eloquent<span class="token punctuation">\\</span>SoftDeletes</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Post</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">SoftDeletes</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// withTrashed\u53EF\u4EE5\u83B7\u53D6\u5230\u88AB\u8F6F\u5220\u9664\u7684\u7ED3\u679C</span>
<span class="token comment">// onlyTrashed\u7528\u4E8E\u53EA\u83B7\u53D6\u88AB\u8F6F\u5220\u9664\u7684\u7ED3\u679C</span>
<span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">withTrashed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// restore\u6062\u590D\u88AB\u8F6F\u5220\u9664\u7684\u8BB0\u5F55</span>
<span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">onlyTrashed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;views&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u5F3A\u5236\u5220\u9664</span>
<span class="token variable">$post</span><span class="token operator">-&gt;</span><span class="token function">forceDelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-\u6279\u91CF\u8D4B\u503C" tabindex="-1"><a class="header-anchor" href="#_5-\u6279\u91CF\u8D4B\u503C" aria-hidden="true">#</a> 5. \u6279\u91CF\u8D4B\u503C</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// \u901A\u8FC7\u6784\u9020\u5668\u5199\u5165\u6570\u636E\u5E93\uFF0C \u767D\u540D\u5355\u4E4B\u5916\u7684\u8D4B\u503C\u4E0D\u4F1A\u5199\u5165</span>
<span class="token comment">// $fillable \u767D\u540D\u5355\uFF0C $guarded \u9ED1\u540D\u5355</span>
<span class="token variable">$post</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Post</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;title&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;\u6D4B\u8BD5\u6587\u7AE0\u6807\u9898&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;content&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;\u6D4B\u8BD5\u6587\u7AE0\u5185\u5BB9&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$post</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Post</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u4FEE\u6539</span>
<span class="token variable">$user</span> <span class="token operator">=</span> <span class="token class-name static-context">Users</span><span class="token operator">::</span><span class="token function">findOrFail</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;username&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;\u9EC4\u6CB9\u714E&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-\u8BBF\u95EE\u5668\u4E0E\u4FEE\u6539\u5668" tabindex="-1"><a class="header-anchor" href="#_6-\u8BBF\u95EE\u5668\u4E0E\u4FEE\u6539\u5668" aria-hidden="true">#</a> 6.\u8BBF\u95EE\u5668\u4E0E\u4FEE\u6539\u5668</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// \u5728\u6A21\u578B\u4E2D\u5B9A\u4E49\u65B9\u6CD5getDisplayNameAttribute\uFF0C\u5C31\u80FD\u76F4\u63A5\u901A\u8FC7display_name\u5C5E\u6027\u8BBF\u95EE</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getDisplayNameAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">nickname</span> <span class="token operator">?</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">nickname</span> <span class="token punctuation">:</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">name</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">display_name</span>

<span class="token comment">// \u653E\u5165\u6570\u636E\u5E93\u524D\u4F1A\u5148\u4FEE\u6539\u5C5E\u6027\uFF0CsetCardNoAttribute\uFF0C\u4F1A\u5C06\u4F20\u5165card_no\u4FEE\u6539</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">setCardNoAttribute</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$value</span> <span class="token operator">=</span> <span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39; &#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// \u5C06\u6240\u6709\u7A7A\u683C\u53BB\u6389</span>
    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">attributes</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;card_no&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">encrypt</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">card_no</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;6222020903001483077&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// \u6570\u7EC4 &amp; JSON \u8F6C\u5316\uFF0C\u76F4\u63A5\u5B58\u53D6\u5373\u53EF</span>
<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">settings</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;city&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;\u676D\u5DDE&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;hobby&#39;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;\u8BFB\u4E66&#39;</span><span class="token punctuation">,</span><span class="token string single-quoted-string">&#39;\u64B8\u7801&#39;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-\u4F5C\u7528\u57DF" tabindex="-1"><a class="header-anchor" href="#_7-\u4F5C\u7528\u57DF" aria-hidden="true">#</a> 7. \u4F5C\u7528\u57DF</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code>// \u4F7F\u7528\u5168\u5C40\u4F5C\u7528\u57DF\u540E\uFF0C\u4E4B\u540E\u7684\u64CD\u4F5C\u90FD\u4F1A\u5E26\u4E0A\u76F8\u5E94\u7684\u64CD\u4F5CwhereNotNull
// app/Scopes \u76EE\u5F55\u4E0B
<span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\\</span>Scopes</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\\</span>Database<span class="token punctuation">\\</span>Eloquent<span class="token punctuation">\\</span>Builder</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\\</span>Database<span class="token punctuation">\\</span>Eloquent<span class="token punctuation">\\</span>Model</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\\</span>Database<span class="token punctuation">\\</span>Eloquent<span class="token punctuation">\\</span>Scope</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">EmailVerifiedAtScope</span> <span class="token keyword">implements</span> <span class="token class-name">Scope</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">apply</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Builder</span> <span class="token variable">$builder</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">Model</span> <span class="token variable">$model</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$builder</span><span class="token operator">-&gt;</span><span class="token function">whereNotNull</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;email_verified_at&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// \u6A21\u578B\u7C7B\u91CC\u4F7F\u7528</span>
<span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword static-context">parent</span><span class="token operator">::</span><span class="token function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword static-context">static</span><span class="token operator">::</span><span class="token function">addGlobalScope</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">EmailVerifiedAtScope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// \u79FB\u9664\u5168\u5C40\u4F5C\u7528\u57DF</span>
<span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token function">withoutGlobalScope</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;email_verified_at_scope&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// \u5C40\u90E8\u4F5C\u7528\u57DF</span>
<span class="token comment">// \u6A21\u578B\u7C7B\u4E2D\u7F16\u5199\uFF0CscopePopular \u5BF9\u5E94 popular</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">scopePopular</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Builder</span> <span class="token variable">$query</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;views&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;&gt;&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;0&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;views&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;desc&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token variable">$post</span> <span class="token operator">=</span> <span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">popular</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u52A8\u6001\u4F5C\u7528\u57DF\uFF0C \u53EF\u4EE5\u4F20\u5982\u60F3\u8981\u7684type</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">scopeOfType</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Builder</span> <span class="token variable">$query</span><span class="token punctuation">,</span> <span class="token variable">$type</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;type&#39;</span><span class="token punctuation">,</span> <span class="token variable">$type</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token variable">$posts</span> <span class="token operator">=</span> <span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">active</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">ofType</span><span class="token punctuation">(</span><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token constant">Article</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-\u6A21\u578B\u4E8B\u4EF6\u548C\u76D1\u542C\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_8-\u6A21\u578B\u4E8B\u4EF6\u548C\u76D1\u542C\u65B9\u5F0F" aria-hidden="true">#</a> 8. \u6A21\u578B\u4E8B\u4EF6\u548C\u76D1\u542C\u65B9\u5F0F</h3><h3 id="_9-\u5173\u8054\u5173\u7CFB-\u8FDE\u8868\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_9-\u5173\u8054\u5173\u7CFB-\u8FDE\u8868\u67E5\u8BE2" aria-hidden="true">#</a> 9. \u5173\u8054\u5173\u7CFB,\u8FDE\u8868\u67E5\u8BE2</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// hasOne</span>
<span class="token comment">// \u5173\u8054\u53E6\u4E00\u4E2A\u8868\u6A21\u578B\uFF0C select * from userprofile</span>
<span class="token comment">// public function hasOne($related, $foreignKey = null, $localKey = null)\uFF0C</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">profile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// params\uFF1A \u5173\u8054\u7684\u8868\u6A21\u578B\uFF0C \u5173\u8054\u8868\u7528\u4E8E\u8FDE\u63A5\u7684key\uFF0C\u672C\u8868\u7528\u4E8E\u8FDE\u63A5\u7684key</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">hasOne</span><span class="token punctuation">(</span><span class="token class-name static-context">UserProfile</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;foreignKey&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;localKey&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// \u53CD\u67E5\u6240\u5C5E\u6A21\u578B\uFF0CbelongsTo</span>
<span class="token comment">// public function belongsTo($related, $foreignKey = null, $ownerKey = null, $relation = null)</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">profile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// params\uFF1A\u5173\u8054\u7684\u8868\uFF0C\u672C\u8868\u7528\u4E8E\u8FDE\u63A5\u7684key\uFF0C\u5173\u8054\u8868\u7528\u4E8E\u8FDE\u63A5\u7684key\uFF0C \u5BF9\u5E94\u5173\u8054\u5173\u7CFB\u65B9\u6CD5\u540D</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">belongsTo</span><span class="token punctuation">(</span><span class="token class-name static-context">UserProfile</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u4E00\u5BF9\u591A hasMany \uFF0C\u53C2\u6570\u540C\u4E0A</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">posts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// params\uFF1A \u5173\u8054\u7684\u8868\u6A21\u578B\uFF0C \u5173\u8054\u8868\u7528\u4E8E\u8FDE\u63A5\u7684key\uFF0C\u672C\u8868\u7528\u4E8E\u8FDE\u63A5\u7684key</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">hasMany</span><span class="token punctuation">(</span><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// \u591A\u5BF9\u591A belongsToMany\uFF0C \u901A\u8FC7\u672C\u8868\u7684key\u627E\u5230\u4E2D\u95F4\u8868\uFF0C\u7136\u540E\u4E2D\u95F4\u8868\u7684\u5173\u8054key\u627E\u5230\u5BF9\u5E94\u7684\u5173\u8054\u8868</span>
<span class="token comment">// public function belongsToMany($related, $table = null, $foreignPivotKey = null, $relatedPivotKey = null, $parentKey = null, $relatedKey = null, $relation = null)</span>
<span class="token comment">// params\uFF1A\u5173\u8054\u8868\u7C7B\uFF0C\u4E2D\u95F4\u8868\u540D\uFF0C\u4E2D\u95F4\u8868\u7684\u67E5\u8BE2key\uFF0C\u4E2D\u95F4\u8868\u5BF9\u5E94\u5173\u8054\u8868\u7684key\uFF0C \u672C\u8868\u7684key\uFF0C\u5173\u8054\u8868\u7684key</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-\u6E34\u6C42\u5F0F\u52A0\u8F7D" tabindex="-1"><a class="header-anchor" href="#_10-\u6E34\u6C42\u5F0F\u52A0\u8F7D" aria-hidden="true">#</a> 10. \u6E34\u6C42\u5F0F\u52A0\u8F7D</h3><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// \u5148\u5728\u6A21\u578B\u91CC\u5173\u8054author</span>
<span class="token variable">$posts</span> <span class="token operator">=</span> <span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;author&#39;</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;views&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;&gt;&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,19);function A(N,I){const a=o("ExternalLinkIcon");return c(),i("div",null,[u,n("p",null,[n("a",r,[k,t(a)]),n("a",d,[v,t(a)])]),g,n("p",null,[n("a",m,[b,t(a)])]),h,n("p",null,[f,n("a",q,[w,t(a)])]),y,n("p",null,[n("a",_,[x,t(a)]),$]),D,n("p",null,[n("a",B,[R,t(a)])]),P,n("p",null,[S,n("a",T,[E,t(a)])]),C])}var O=e(l,[["render",A],["__file","laravel\u5165\u95E8.html.vue"]]);export{O as default};
